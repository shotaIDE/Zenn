---
title: "共変性と反変性の簡単な説明とDartにおける例"
emoji: "🎃"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["dart", "flutter"]
published: false
---

# 一言でまとめると

リスコフの置換原則は前提とすると、

基底型でできることは派生型もでき、そこから導き出される定理。

派生型の引数を持つ関数型やクラスの型に、基底型の引数を持つ関数やクラスのインスタンスが代入できる
→ 引数の派生型に基底型を置き換えられる。引数に**反変性**がある

基底型の戻り値を持つ関数型やクラスの型に、派生型の戻り値を持つ関数やクラスのインスタンスが代入できる
→ 戻り値の基底型に派生型を置き換えられる。戻り値に**共変性**がある

基底型には派生型を代入できる互換性があり、

これと同じ方向に、派生型に対して互換性を持つことを「共変」
反対の方向に、基底型に対して互換性を持つことを「反変」
どちらの互換もない場合は「不変」

## 共変性

基底クラスに派生クラスを代入しても成り立つ性質。

外部に基底クラスしか返さないため、成り立つ。

## 反変性

派生クラスに基底クラスを代入しても成り立つ性質。

内部で基底クラスのメソッドしか利用していないため、成り立つ。
基底クラスが持つメソッドは派生クラスも持つから、成り立つ。
派生クラスが基底クラスの振る舞いをできるから、成り立つ。
リスコフの置換原則が成り立つ。

# freezed で生成した Union class における例

(TBD)

# 素の Dart における例

(TBD)
