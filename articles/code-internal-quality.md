---
title: "コードの内部品質を高めて、継続的な価値提供を下支えする"
emoji: "🕌"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["ios", "android"]
published: false
---

# 成果

- 開発メンバーの強み・弱みの理解
  - 強み
    - 決められた外部仕様を確実に実装する
    - 外部仕様に決められていないエラーハンドリングを考慮
  - 弱み
    - サービスの中の相対的な価値を踏まえた仕様検討
    - 修正に対する既存実装の影響箇所の把握と、それを考慮した実装
    - デグレを防ぐために効果的な自動テストの実装
- 内部品質の向上に関する施策のノウハウ
  - 実装方法を JP 側から具体的に提示する方法はあまりうまくいかなかった
  - 意識づけを行う（現状よりも内部品質をより高めていきつつ、リーダーだけでなく全員で取り組むなど）ことで、自律的に取り組んでいく様子が見られた
- 内部品質に関する意識の向上
  - 週次のメンテナンスタスクの実施により、各メンバーが様々な内部品質に関するトピックに対して意識を向けるようになった
  - 単体テストコードの拡充に関して、自発的に提案
- コードコメントの質の向上
  - 開発メンバーが背景に関するコードコメントを書くようになった
- 開発プロセスやコード品質の定量的な測定と観察
  - コード品質が順調に維持・向上しているかを確認できるようになった
  - 開発メンバーがコード品質のメトリクス(単体テストのコードカバレッジ)を意識する場面が見られた
- アプリのメトリクスに基づく意思決定
  - Android プッシュ通知の EOL 対応
- トランクベース開発の効果、つらさ
  - 普段の開発作業におけるブランチ管理が不要、デプロイ手順の容易さ
  - トランクブランチの状態を常に一定以上の品質を保たないと、つらい
- 開発プロセスの自動化
  - ライブラリ更新の自動化により、週次で 0.5pt 程度の作業がなくなった
- 開発プロセスを効率化するための技術の導入
  - プロキシーツールに関するドキュメンテーションと動作確認・テストへの導入
- E2E テストの導入
  - 開発メンバーによる自律的な E2E テストの追加とメンテナンス、精度向上の取り組み。開発メンバーが外部品質にオーナーシップをより持っていくことに繋げられそう

# 背景

継続的に価値を提供していくために、コードの内部品質改善というのは重要なトピックです。

コードの内部品質に関して、重要視しているメンバーもいればそうでないメンバーもいるという状況でしたので、以下の施策を取り組んできました。

- マインドセットの明文化
- 内部品質の定量的な指標の可視化
- PR レビューなどを通した草の根活動
- 継続的インテグレーションの導入

1 つ失敗として、内部品質の改善における内容や重要度を、開発メンバー以外が詳細に決めてしまうということをした点です。
こちらは、開発メンバーから内部品質に関するオーナーシップを奪う行為になってしまい、ただ言われたことをやるだけになってしまう様子が散見されました。

また、自動化できるものは自動化していきます。

## ガードレール

## 運用

- ルールは決めただけではダメで、正しく運用されるために、何度でもメンバーに働きかけをする
- フィードバックサイクル

# まとめ
