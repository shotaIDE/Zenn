---
title: "私のモバイルプロジェクトにおけるトランクベース開発によるリリース戦略"
emoji: "💬"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["ios"]
published: false
---

# 概要

- メインブランチを常にリリース可能な状態に保つ。
- リリースブランチにマージし、必要に応じてチェリーピックを使う。

# 前提

- リリース済みの
- プロダクトオーナーが考える単位で
- GitHub で PR を利用した開発を行っている

# 普段の開発における立ち振る舞い

## 1 本のブランチに対し全ての変更をコミットしていく

## 開発単位をできるだけ小さく保つ

（これは必要か？）

## フィーチャーフラグやビルドツールの活用によりマージとリリースを分離する

## 滞留するチケットを監視し、リリースできるように促す

## Squash マージを強制し、PR1 つに対し 1 つのコミットが生成されるようにする

## バックログチケットへの紐付けを強制する

Danger を利用し、PR のタイトルをチェックする CI を組んでいます。
また、Squash コミットで PR タイトルが最終的なコミットメッセージになるようにします。

# リリース作業

## 概要

### PR にリリース済みラベルがついているものはリリースブランチにマージされている

### PR に特定のラベルをつけることでリリースに含める・含めないを管理する

### タグをつけることで、リリースの地点を管理する

この際、マージコミットにタグを付与してしまうと履歴のツリーから参照できないコミットにタグが付与されてしまうため、リリースレビューブランチにタグを打つ。

### GitHub にリリースレビューブランチを作り、リリースブランチへのマージ PR を作り、リリース作業を行う

### リリースブランチは Squash マージではなく、通常のマージを行う

## チェック作業

# 追加でビルドした場合

# hotfix での作業

# 参考

- Google のソフトウェアエンジニアリング -持続可能なプログラミングを支える技術、文化、プロセス-
